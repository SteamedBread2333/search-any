<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"content="width=device-width, initial-scale=1.0">
    <title>æ·éª°å­</title>
    <style>
        :root {
            --primary: #9c27b0; /* ç´«è‰²ï¼Œå¤œåº—é£æ ¼ */
            --primary-hover: #7b1fa2; /* æ·±ç´«è‰² */
            --bg: #121212; /* æ·±é»‘è‰²èƒŒæ™¯ */
            --card-bg: #1e1e1e; /* æ·±ç°è‰²å¡ç‰‡èƒŒæ™¯ */
            --text: #e0e0e0; /* æµ…ç°è‰²æ–‡å­— */
            --border: #333; /* æ·±ç°è‰²è¾¹æ¡† */
            --dice-bg: #f7f7f7; /* ä¿æŒéª°å­èƒŒæ™¯ä¸ºç™½è‰² */
            --dice-dot: #333; /* ä¿æŒéª°å­ç‚¹æ•°ä¸ºé»‘è‰² */
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .dice-container {
            margin: 2rem auto;
            perspective: 1000px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
        }
        
        .dice {
            position: relative;
            width: 150px;
            height: 150px;
            transform-style: preserve-3d;
            transition: transform 1.5s ease-out;
        }
        
        .controls {
            margin: 1rem 0;
        }
        
        #dice-count {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            width: 60px;
            background-color: #333; /* æ·±ç°è‰²èƒŒæ™¯ */
            color: #e0e0e0; /* æµ…ç°è‰²æ–‡å­— */
            box-shadow: 0 0 5px rgba(156, 39, 176, 0.5); /* ç´«è‰²å‘å…‰æ•ˆæœ */
        }
        
        .dice-face {
            position: absolute;
            width: 150px;
            height: 150px;
            background-color: var(--dice-bg); /* ä¿æŒéª°å­èƒŒæ™¯ä¸ºç™½è‰² */
            border: 2px solid #ccc;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1), 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        .dot {
            width: 25px;
            height: 25px;
            background-color: var(--dice-dot); /* ä¿æŒéª°å­ç‚¹æ•°ä¸ºé»‘è‰² */
            border-radius: 50%;
            position: absolute;
        }
        
        /* éª°å­å„é¢çš„ä½ç½® */
        .front  { transform: translateZ(75px); }
        .back   { transform: rotateY(180deg) translateZ(75px); }
        .right  { transform: rotateY(90deg) translateZ(75px); }
        .left   { transform: rotateY(-90deg) translateZ(75px); }
        .top    { transform: rotateX(90deg) translateZ(75px); }
        .bottom { transform: rotateX(-90deg) translateZ(75px); }
        
        /* å„é¢çš„ç‚¹æ•°å¸ƒå±€ */
        .one .dot:nth-child(1) { top: 62.5px; left: 62.5px; }
        
        .two .dot:nth-child(1) { top: 30px; left: 30px; }
        .two .dot:nth-child(2) { bottom: 30px; right: 30px; }
        
        .three .dot:nth-child(1) { top: 30px; left: 30px; }
        .three .dot:nth-child(2) { top: 62.5px; left: 62.5px; }
        .three .dot:nth-child(3) { bottom: 30px; right: 30px; }
        
        .four .dot:nth-child(1) { top: 30px; left: 30px; }
        .four .dot:nth-child(2) { top: 30px; right: 30px; }
        .four .dot:nth-child(3) { bottom: 30px; left: 30px; }
        .four .dot:nth-child(4) { bottom: 30px; right: 30px; }
        
        .five .dot:nth-child(1) { top: 30px; left: 30px; }
        .five .dot:nth-child(2) { top: 30px; right: 30px; }
        .five .dot:nth-child(3) { top: 62.5px; left: 62.5px; }
        .five .dot:nth-child(4) { bottom: 30px; left: 30px; }
        .five .dot:nth-child(5) { bottom: 30px; right: 30px; }
        
        .six .dot:nth-child(1) { top: 30px; left: 30px; }
        .six .dot:nth-child(2) { top: 30px; right: 30px; }
        .six .dot:nth-child(3) { top: 62.5px; left: 30px; }
        .six .dot:nth-child(4) { top: 62.5px; right: 30px; }
        .six .dot:nth-child(5) { bottom: 30px; left: 30px; }
        .six .dot:nth-child(6) { bottom: 30px; right: 30px; }
        
        .roll-btn {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%); /* ç´«è‰²æ¸å˜ */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4); /* ç´«è‰²é˜´å½± */
            margin: 1rem 0;
        }
        
        .roll-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.6); /* æ›´äº®çš„ç´«è‰²é˜´å½± */
        }
        
        .roll-btn:active {
            transform: translateY(0);
        }
        
        .roll-btn:disabled {
            background: #333; /* æ·±ç°è‰² */
            color: #777;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .lock-btn {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(135deg, #ff4081 0%, #f50057 100%); /* ç²‰è‰²æ¸å˜ */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 64, 129, 0.4); /* ç²‰è‰²é˜´å½± */
        }
        
        .lock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 64, 129, 0.6); /* æ›´äº®çš„ç²‰è‰²é˜´å½± */
        }
        
        .lock-btn:disabled {
            background: #333; /* æ·±ç°è‰² */
            color: #777;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 1.5rem 0;
            min-height: 2rem;
        }
        
        .instructions {
            margin-top: 2rem;
            padding: 1rem;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(156, 39, 176, 0.3); /* ç´«è‰²é˜´å½± */
            border: 1px solid var(--border);
            text-align: left;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: var(--primary);
        }
        
        .instructions ul {
            padding-left: 1.5rem;
        }
        
        .instructions li {
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }
            
            .dice {
                width: 100px;
                height: 100px;
            }
            
            .dice-face {
                width: 100px;
                height: 100px;
            }
            
            .front  { transform: translateZ(50px); }
            .back   { transform: rotateY(180deg) translateZ(50px); }
            .right  { transform: rotateY(90deg) translateZ(50px); }
            .left   { transform: rotateY(-90deg) translateZ(50px); }
            .top    { transform: rotateX(90deg) translateZ(50px); }
            .bottom { transform: rotateX(-90deg) translateZ(50px); }
            
            .dot {
                width: 15px;
                height: 15px;
            }
            
            .one .dot:nth-child(1) { top: 42.5px; left: 42.5px; }
            
            .two .dot:nth-child(1) { top: 20px; left: 20px; }
            .two .dot:nth-child(2) { bottom: 20px; right: 20px; }
            
            .three .dot:nth-child(1) { top: 20px; left: 20px; }
            .three .dot:nth-child(2) { top: 42.5px; left: 42.5px; }
            .three .dot:nth-child(3) { bottom: 20px; right: 20px; }
            
            .four .dot:nth-child(1) { top: 20px; left: 20px; }
            .four .dot:nth-child(2) { top: 20px; right: 20px; }
            .four .dot:nth-child(3) { bottom: 20px; left: 20px; }
            .four .dot:nth-child(4) { bottom: 20px; right: 20px; }
            
            .five .dot:nth-child(1) { top: 20px; left: 20px; }
            .five .dot:nth-child(2) { top: 20px; right: 20px; }
            .five .dot:nth-child(3) { top: 42.5px; left: 42.5px; }
            .five .dot:nth-child(4) { bottom: 20px; left: 20px; }
            .five .dot:nth-child(5) { bottom: 20px; right: 20px; }
            
            .six .dot:nth-child(1) { top: 20px; left: 20px; }
            .six .dot:nth-child(2) { top: 20px; right: 20px; }
            .six .dot:nth-child(3) { top: 42.5px; left: 20px; }
            .six .dot:nth-child(4) { top: 42.5px; right: 20px; }
            .six .dot:nth-child(5) { bottom: 20px; left: 20px; }
            .six .dot:nth-child(6) { bottom: 20px; right: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ² æ·éª°å­</h1>
        
        <div class="controls">
            <label for="dice-count">éª°å­æ•°é‡: </label>
            <input type="number" id="dice-count" min="1" max="10" value="1">
        </div>
        
        <div class="dice-container" id="dice-container">
            <!-- éª°å­å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="result" id="result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æ·éª°å­</div>
        
        <div class="button-group">
            <button class="roll-btn" id="roll-btn">ğŸ² æ·éª°å­</button>
            <button class="lock-btn" id="lock-btn">ğŸ”’ é”å®š</button>
        </div>
        
        <div class="instructions">
            <h3>ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li>ç‚¹å‡» "ğŸ² æ·éª°å­" æŒ‰é’®å¼€å§‹æ·éª°å­</li>
                <li>éª°å­ä¼šéšæœºæ—‹è½¬å¹¶æ˜¾ç¤ºä¸€ä¸ª1-6çš„ç‚¹æ•°</li>
                <li>æ·éª°å­è¿‡ç¨‹ä¸­æŒ‰é’®ä¼šè¢«ç¦ç”¨ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»</li>
                <li>æ·éª°å­å®Œæˆåä¼šæ˜¾ç¤ºç»“æœ</li>
            </ul>
        </div>
    </div>

    <script>
        const diceContainer = document.getElementById('dice-container');
        const rollBtn = document.getElementById('roll-btn');
        const resultElement = document.getElementById('result');
        const diceCountInput = document.getElementById('dice-count');
        
        // éª°å­å„é¢çš„æ—‹è½¬å€¼
        const diceRotations = [
            { x: 0, y: 0, z: 0 },        // 1 (æ­£é¢)
            { x: 0, y: 180, z: 0 },      // 2 (èƒŒé¢)
            { x: 0, y: -90, z: 0 },      // 3 (å·¦é¢)
            { x: 0, y: 90, z: 0 },       // 4 (å³é¢)
            { x: -90, y: 0, z: 0 },      // 5 (ä¸Šé¢)
            { x: 90, y: 0, z: 0 }        // 6 (ä¸‹é¢)
        ];
        
        // åˆ›å»ºéª°å­HTMLç»“æ„
        function createDice() {
            const dice = document.createElement('div');
            dice.className = 'dice';
            
            // åˆ›å»ºéª°å­çš„6ä¸ªé¢
            const faces = ['front one', 'back two', 'right three', 'left four', 'top five', 'bottom six'];
            const dotCounts = [1, 2, 3, 4, 5, 6];
            
            for (let i = 0; i < 6; i++) {
                const face = document.createElement('div');
                face.className = `dice-face ${faces[i]}`;
                
                // æ·»åŠ ç‚¹æ•°
                for (let j = 0; j < dotCounts[i]; j++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    face.appendChild(dot);
                }
                
                dice.appendChild(face);
            }
            
            return dice;
        }
        
        // æ›´æ–°éª°å­å®¹å™¨ä¸­çš„éª°å­æ•°é‡
        function updateDiceCount() {
            const count = parseInt(diceCountInput.value) || 1;
            const clampedCount = Math.max(1, Math.min(10, count));
            diceCountInput.value = clampedCount;
            
            // ä¿å­˜éª°å­æ•°é‡åˆ°localStorage
            localStorage.setItem('diceCount', clampedCount);
            
            // æ¸…ç©ºå®¹å™¨
            diceContainer.innerHTML = '';
            
            // åˆ›å»ºæŒ‡å®šæ•°é‡çš„éª°å­
            for (let i = 0; i < clampedCount; i++) {
                diceContainer.appendChild(createDice());
            }
        }
        
        // æ·éª°å­å‡½æ•°
        function rollDice() {
            // ç¦ç”¨æŒ‰é’®å’Œè¾“å…¥æ¡†
            rollBtn.disabled = true;
            diceCountInput.disabled = true;
            document.getElementById('lock-btn').disabled = true; // ç¦ç”¨é”å®šæŒ‰é’®
            resultElement.textContent = 'æ·éª°å­ä¸­...';
            
            // è·å–æ‰€æœ‰éª°å­å…ƒç´ 
            const diceElements = diceContainer.querySelectorAll('.dice');
            const diceValues = [];
            
            // ä¸ºæ¯ä¸ªéª°å­ç”Ÿæˆéšæœºç‚¹æ•°å’Œæ—‹è½¬åŠ¨ç”»
            diceElements.forEach(die => {
                // éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹æ•° (1-6)
                const diceValue = Math.floor(Math.random() * 6) + 1;
                diceValues.push(diceValue);
                
                // æ·»åŠ éšæœºæ—‹è½¬åŠ¨ç”»ï¼Œå¹¶åœ¨åŠ¨ç”»ç»“æŸæ—¶åº”ç”¨æœ€ç»ˆæ—‹è½¬
                const randomX = Math.floor(Math.random() * 5) * 360 + 720 + diceRotations[diceValue - 1].x; // è‡³å°‘æ—‹è½¬ä¸¤åœˆ
                const randomY = Math.floor(Math.random() * 5) * 360 + 720 + diceRotations[diceValue - 1].y;
                const randomZ = Math.floor(Math.random() * 5) * 360 + 720 + diceRotations[diceValue - 1].z;
                
                die.style.transform = `rotateX(${randomX}deg) rotateY(${randomY}deg) rotateZ(${randomZ}deg)`;
            });
            
            // åŠ¨ç”»ç»“æŸåæ˜¾ç¤ºç»“æœ
            setTimeout(() => {
                // è®¡ç®—æ€»ç‚¹æ•°
                const total = diceValues.reduce((sum, value) => sum + value, 0);
                
                // æ˜¾ç¤ºç»“æœ
                if (diceValues.length === 1) {
                    resultElement.textContent = `ğŸ² æ·å‡ºäº† ${diceValues[0]} ç‚¹!`;
                } else {
                    const valuesText = diceValues.join(', ');
                    resultElement.textContent = `ğŸ² æ·å‡ºäº† ${valuesText} ç‚¹ï¼Œæ€»è®¡ ${total} ç‚¹!`;
                }
                
                // å¯ç”¨æŒ‰é’®å’Œè¾“å…¥æ¡†
                rollBtn.disabled = false;
                diceCountInput.disabled = false;
                document.getElementById('lock-btn').disabled = false; // å¯ç”¨é”å®šæŒ‰é’®
            }, 1500);
        }
        
        // ä»localStorageè¯»å–éª°å­æ•°é‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™é»˜è®¤ä¸º1
        const savedDiceCount = localStorage.getItem('diceCount');
        if (savedDiceCount) {
            diceCountInput.value = savedDiceCount;
        }

        // é”å®šçŠ¶æ€å˜é‡
        let isLocked = false;
        
        // ä»localStorageè¯»å–é”å®šçŠ¶æ€
        const savedLockedState = localStorage.getItem('diceLocked');
        if (savedLockedState === 'true') {
            isLocked = true;
            rollBtn.disabled = true;
            diceCountInput.disabled = true;
            document.getElementById('lock-btn').textContent = 'ğŸ”“ è§£é”';
        }
        
        // åˆå§‹åŒ–éª°å­
        updateDiceCount();
        
        // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        rollBtn.addEventListener('click', rollDice);
        
        // æ·»åŠ éª°å­æ•°é‡å˜åŒ–äº‹ä»¶
        diceCountInput.addEventListener('change', updateDiceCount);
        
        // é”å®šæŒ‰é’®åŠŸèƒ½
        document.getElementById('lock-btn').addEventListener('click', function() {
            isLocked = !isLocked;
            
            if (isLocked) {
                // é”å®šçŠ¶æ€ï¼šç¦ç”¨æ·éª°å­æŒ‰é’®å’Œéª°å­æ•°é‡è¾“å…¥æ¡†
                rollBtn.disabled = true;
                diceCountInput.disabled = true;
                this.textContent = 'ğŸ”“ è§£é”';
                
                // ä¿å­˜é”å®šçŠ¶æ€åˆ°localStorage
                localStorage.setItem('diceLocked', 'true');
            } else {
                // è§£é”çŠ¶æ€ï¼šå¯ç”¨æ·éª°å­æŒ‰é’®å’Œéª°å­æ•°é‡è¾“å…¥æ¡†
                rollBtn.disabled = false;
                diceCountInput.disabled = false;
                this.textContent = 'ğŸ”’ é”å®š';
                
                // ä¿å­˜è§£é”çŠ¶æ€åˆ°localStorage
                localStorage.setItem('diceLocked', 'false');
            }
        });
        
        // åœ¨éª°å­æ•°é‡è¾“å…¥æ¡†çš„changeäº‹ä»¶ä¸­æ£€æŸ¥é”å®šçŠ¶æ€
        diceCountInput.addEventListener('change', function() {
            if (!isLocked) {
                updateDiceCount();
            }
        });
        
        // æ·»åŠ é”®ç›˜æ”¯æŒ (æŒ‰ç©ºæ ¼é”®æ·éª°å­)
        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space' && !rollBtn.disabled && !isLocked) {
                event.preventDefault();
                rollDice();
            }
        });
    </script>
</body>
</html>